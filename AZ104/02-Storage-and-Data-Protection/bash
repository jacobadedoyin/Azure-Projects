# Variables
RG="AZ104-Lab"
LOC="uksouth"
NAME="adedoyinstorage2026"

echo "----------------------------------------------------"
echo "TASK 1: PROVISIONING STORAGE ACCOUNT"
echo "----------------------------------------------------"

az storage account create --name $NAME --resource-group $RG --location $LOC --sku Standard_LRS --kind StorageV2 --output json

echo "----------------------------------------------------"
echo "TASK 2: CREATING ARCHIVE CONTAINER"
echo "----------------------------------------------------"

az storage container create --name "data-archive" --account-name $NAME --auth-mode login --output table

echo "----------------------------------------------------"
echo "TASK 3: APPLYING IMMUTABILITY (WORM) POLICY"
echo "----------------------------------------------------"

az storage container immutability-policy create --account-name $NAME --container-name "data-archive" --period 180 --allow-protected-append-writes true --auth-mode login --output table
